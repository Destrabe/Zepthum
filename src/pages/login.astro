---
import Layout from "../layouts/loginLayout.astro";
export const prerender = false;
import "../styles/login.css";
const apiUrl = import.meta.env.PUBLIC_API_URL;
---

<Layout title="Zepthum - Login">
  <div class="split-container">
    <div class="left-side">
      <img src="/assets/images/iconKirby.webp" alt="Ilustración login" />
    </div>
    <!--PRINCIPAL -->
    <div class="right-side">
      <div class="container">
        <div class="main">
          <!--HEADER -->
          <div class="header">
            <!--Logo -->
            <div class="logo">
              <img src="/assets/svg/logo_tem.svg" class="logo-img" alt="Logo" />
              <span class="logo-name">Zepthum</span>
            </div>
            <!--Texto de bienvenida -->
            <span class="welcome-text">
              Productividad impulsada por la competencia.
            </span>
            <span class="welcome-subtext">
              Gana puntos y lidera el ranking.</span
            >
          </div>
          <!--Formulario -->
          <div class="form-section">
            <div class="form-container">
              <h1>Iniciar sesión</h1>
              <form id="login-form">
                <div class="input-group">
                  <label for="correo">Correo</label>
                  <input type="email" id="correo" name="email" required />
                </div>
                <div class="input-group">
                  <label for="password">Contraseña</label>
                  <input
                    type="password"
                    id="password"
                    name="password"
                    required
                  />
                </div>
                <div class="olvidar-pass">
                  <a href="#">¿Olvidaste tu contraseña?</a>
                </div>
                <button type="submit">Entrar</button>
              </form>
            </div>
            <div class="registrarse">
              <p>¿No tienes cuenta?</p>
              <a href="/register">¡Regístrate ahora!</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="module">
    import userService from "/scripts/userService.js";

    document
      .getElementById("login-form")
      .addEventListener("submit", async (e) => {
        e.preventDefault();
        const email = document.getElementById("correo").value;
        const password = document.getElementById("password").value;
        await userService.login(email, password, apiUrl);
      });
  </script>
</Layout>
